{"url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3712", "repository_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT", "labels_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3712/labels{/name}", "comments_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3712/comments", "events_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3712/events", "html_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/3712", "id": 1693130950, "node_id": "PR_kwDOJKSTjM5Pn7x8", "number": 3712, "title": "Fix list files function to accept more arguments", "user": {"login": "bassie661", "id": 68592736, "node_id": "MDQ6VXNlcjY4NTkyNzM2", "avatar_url": "https://avatars.githubusercontent.com/u/68592736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bassie661", "html_url": "https://github.com/bassie661", "followers_url": "https://api.github.com/users/bassie661/followers", "following_url": "https://api.github.com/users/bassie661/following{/other_user}", "gists_url": "https://api.github.com/users/bassie661/gists{/gist_id}", "starred_url": "https://api.github.com/users/bassie661/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bassie661/subscriptions", "organizations_url": "https://api.github.com/users/bassie661/orgs", "repos_url": "https://api.github.com/users/bassie661/repos", "events_url": "https://api.github.com/users/bassie661/events{/privacy}", "received_events_url": "https://api.github.com/users/bassie661/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 5410632949, "node_id": "LA_kwDOJKSTjM8AAAABQn-09Q", "url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/labels/size/m", "name": "size/m", "color": "D0DBCF", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2023-05-02T21:34:37Z", "updated_at": "2023-05-02T21:35:02Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/pulls/3712", "html_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/3712", "diff_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/3712.diff", "patch_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/3712.patch", "merged_at": null}, "body": "### Background\r\nA lot of times agents come up with arguments against the list_files() function (former search_files) which are not accepted, this makes the agent end up in a loop, not finding anything but an error.\r\n\r\n### Changes\r\nWhile a lot of times the args are just a replacement of the original \"filename\" argument i've also seen extension as an argument, with literally an \".ext\" as search query.\r\n\r\nI changed the function to accept all, although it might be better to take care of this on the agent side which makes up all the arguments, but in the meantime I couldn't take it anymore :)\r\n\r\n### Documentation\r\nMainly in-code comments:\r\n\r\ndirectory (str): The directory to search in\r\nextension (str, optional): The file extension to filter by. If provided, all other arguments except 'directory' and 'keywords' will be ignored. Defaults to None.\r\nfilename (str, optional): A partial file name to filter by. If provided and 'extension' is not, all other arguments except 'directory' will be ignored. Defaults to None.\r\nquery (str, optional): A query to filter by. If provided and 'extension' and 'filename' are not, all other arguments except 'directory' will be ignored. Defaults to None.\r\nfilename_query (str, optional): A query to filter file names by. If provided and 'extension', 'filename', and 'query' are not, all other arguments except 'directory' will be ignored. Defaults to None.\r\nfilename_substring (str, optional): A substring to filter file names by. If provided and 'extension', 'filename', 'query', and 'filename_query' are not, all other arguments except 'directory' will be ignored. Defaults to None.\r\nkeywords (list[str], optional): A list of keywords to filter by. If provided and 'extension', 'filename', 'query', 'filename_query', and 'filename_substring' are not, 'extension' will be appended to each keyword before filtering. Defaults to None.\r\n\r\n\r\n### Test Plan\r\nTested for a week with continuously changing file and creating file goals and I haven't seen an error or stall since.\r\n\r\n### PR Quality Checklist\r\n- [x] My pull request is atomic and focuses on a single change.\r\n- [x] I have thoroughly tested my changes with multiple different prompts.\r\n- [x] I have considered potential risks and mitigations for my changes.\r\n- [x] I have documented my changes clearly and comprehensively.\r\n- [x] I have not snuck in any \"extra\" small tweaks changes\r\n", "reactions": {"url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3712/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3712/timeline", "performed_via_github_app": null, "state_reason": null}