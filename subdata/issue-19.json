{"url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3668", "repository_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT", "labels_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3668/labels{/name}", "comments_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3668/comments", "events_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3668/events", "html_url": "https://github.com/Significant-Gravitas/Auto-GPT/issues/3668", "id": 1691820963, "node_id": "I_kwDOJKSTjM5k1yOj", "number": 3668, "title": "Introducing Looping Heuristics / Detection", "user": {"login": "Boostrix", "id": 119627414, "node_id": "U_kgDOByFelg", "avatar_url": "https://avatars.githubusercontent.com/u/119627414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Boostrix", "html_url": "https://github.com/Boostrix", "followers_url": "https://api.github.com/users/Boostrix/followers", "following_url": "https://api.github.com/users/Boostrix/following{/other_user}", "gists_url": "https://api.github.com/users/Boostrix/gists{/gist_id}", "starred_url": "https://api.github.com/users/Boostrix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Boostrix/subscriptions", "organizations_url": "https://api.github.com/users/Boostrix/orgs", "repos_url": "https://api.github.com/users/Boostrix/repos", "events_url": "https://api.github.com/users/Boostrix/events{/privacy}", "received_events_url": "https://api.github.com/users/Boostrix/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2023-05-02T05:56:25Z", "updated_at": "2023-05-02T05:56:25Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "### Duplicates\n\n- [X] I have searched the existing issues\n\n### Summary \ud83d\udca1\n\nThis is a \"meta\" issue to keep track of issues relating to redundant/unnecessary (infinite/endless) looping and the idea to keep track of previous arguments to detect such situations, as per: https://github.com/Significant-Gravitas/Auto-GPT/issues/3444#issuecomment-1529005391\r\n\r\n\r\n- https://github.com/Significant-Gravitas/Auto-GPT/issues/1994\r\n- https://github.com/Significant-Gravitas/Auto-GPT/issues/3444\r\n- https://github.com/Significant-Gravitas/Auto-GPT/issues/3644\r\n\r\n\r\nIdea: maintain a \"call stack\" that contains hashed values of each query/prompt - whenever this is used, increment a counter to detect if we're inside a loop without making much progress (the arguments will remain the same, and so will the hash) - if we are not making any progress at all, the response will also be the same (hash that too).\r\n\r\nThis should also help the agent determine if it's trying to re-solve a task that was previously tackled.\r\n\r\nSolution: For a sub-agent, it should notify its parent agent using either the messaging API or by throwing the equivalent of an exception, so that it can be terminated/restarted: https://github.com/Significant-Gravitas/Auto-GPT/issues/1548#issuecomment-1529009589\r\n\r\nFor top-level agents, it's probably best to interrupt the loop and pursue an alternate option - which may involve human feedback: https://github.com/Significant-Gravitas/Auto-GPT/issues/3396\r\nThe cleanest method might be offering a list of options to the user (inspired by the current state of things, as per #1548), including an option for open ended feedback.\r\n\r\nThis feedback should be serialized in some form, so that the agent can easily refer back to it as per: https://github.com/Significant-Gravitas/Auto-GPT/issues/1377\r\nThe goal being to provide a means to do some form of self-assessment, as per: #305 \r\nThis may involve telling the agent to log its progress to a task specific log file so that a parent agent can evaluate the log file, comparing it to the stated long-term goal.\r\n\n\n### Examples \ud83c\udf08\n\n_No response_\n\n### Motivation \ud83d\udd26\n\n- detect whether an agent is trying to tackle a task that it tackled previously\r\n- detect whether it's using the same arguments and seeing the same response (=being stuck)\r\n- get rid of unnecessary looping\r\n- allow an agent to detect whether its work is in line with the stated goal or not\r\n- provide a means to bail out if necessary, either informing the parent agent and/or asking for human feedback\r\n- at the very least, use this as a means to change the problem solving strategy", "reactions": {"url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3668/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/3668/timeline", "performed_via_github_app": null, "state_reason": null}