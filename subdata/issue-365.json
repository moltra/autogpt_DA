{"url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2123", "repository_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT", "labels_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2123/labels{/name}", "comments_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2123/comments", "events_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2123/events", "html_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/2123", "id": 1670632122, "node_id": "PR_kwDOJKSTjM5Octbn", "number": 2123, "title": "only add generate_image command to prompt if image_provider is specified", "user": {"login": "hdkiller", "id": 10578603, "node_id": "MDQ6VXNlcjEwNTc4NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/10578603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hdkiller", "html_url": "https://github.com/hdkiller", "followers_url": "https://api.github.com/users/hdkiller/followers", "following_url": "https://api.github.com/users/hdkiller/following{/other_user}", "gists_url": "https://api.github.com/users/hdkiller/gists{/gist_id}", "starred_url": "https://api.github.com/users/hdkiller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hdkiller/subscriptions", "organizations_url": "https://api.github.com/users/hdkiller/orgs", "repos_url": "https://api.github.com/users/hdkiller/repos", "events_url": "https://api.github.com/users/hdkiller/events{/privacy}", "received_events_url": "https://api.github.com/users/hdkiller/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 5394106095, "node_id": "LA_kwDOJKSTjM8AAAABQYOG7w", "url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/labels/potential%20plugin", "name": "potential plugin", "color": "0052cc", "default": false, "description": "This may fit better into our plugin system."}, {"id": 5400185961, "node_id": "LA_kwDOJKSTjM8AAAABQeBMaQ", "url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/labels/conflicts", "name": "conflicts", "color": "FBCA04", "default": false, "description": "Automatically applied to PRs with merge conflicts"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2023-04-17T08:01:33Z", "updated_at": "2023-04-22T23:26:07Z", "closed_at": null, "author_association": "CONTRIBUTOR", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/pulls/2123", "html_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/2123", "diff_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/2123.diff", "patch_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/2123.patch", "merged_at": null}, "body": "### Background\r\nThe prompt should only include executable commands. If the `IMAGE_PROVIDER` environment variable is absent, executing the `generate_image` command will result in a `No Image Provider Set` message. Setting this variable to False will also enable the ability to disable image generation.\r\n\r\n### Changes\r\nAdd `generate_image` command to the prompt only if `IMAGE_PROVIDER` is set.\r\n\r\n### Documentation\r\nComment added to prompt.py\r\n\r\n### Test Plan\r\nI've tested if image generation capabilities are there if the environment variable is set:\r\n\r\n```\r\nAI Name: StableDiffusionImageGenerator\r\nStableDiffusionImageGenerator here!  I am at your service.\r\nDescribe your AI's role:  For example, 'an AI designed to autonomously develop and run businesses with the sole goal of increasing your net worth.'\r\nStableDiffusionImageGenerator is: an AI designed to generate images with stablediffusion.\r\nEnter up to 5 goals for your AI:  For example: Increase net worth, Grow Twitter Account, Develop and manage multiple businesses autonomously'\r\nEnter nothing to load defaults, enter nothing when finished.\r\nGoal 1: Use the generate image command to create a lavish octopus doing busy work\r\nGoal 2: Terminate\r\nGoal 3:\r\n```\r\n\r\n```\r\nNEXT ACTION:  COMMAND = generate_image ARGUMENTS = {'prompt': 'Generate an image of a lavish octopus sitting at a desk in a luxurious office, surrounded by papers and files. The octopus should be wearing a fancy suit and appear to be busy working on something important.'}\r\n\r\n..\r\n\r\nImage Generated for prompt:Generate an image of a lavish octopus sitting at a desk in a luxurious office, surrounded by papers and files. The octopus should be wearing a fancy suit and appear to be busy working on something important.\r\nSYSTEM:  Command generate_image returned: Saved to disk:5b1faa9e-c05c-4fd3-9e66-d5a30e45ccdb.jpg\r\n```\r\n\r\n### PR Quality Checklist\r\n- [X] My pull request is atomic and focuses on a single change.\r\n- [X] I have thoroughly tested my changes with multiple different prompts.\r\n- [X] I have considered potential risks and mitigations for my changes.\r\n- [X] I have documented my changes clearly and comprehensively.\r\n- [X] I have not snuck in any \"extra\" small tweaks changes <!-- Submit these as separate Pull Requests, they are the easiest to merge! -->\r\n\r\n<!-- If you haven't added tests, please explain why. If you have, check the appropriate box. If you've ensured your PR is atomic and well-documented, check the corresponding boxes. -->\r\n\r\n<!-- By submitting this, I agree that my pull request should be closed if I do not fill this out or follow the guide lines. -->\r\n", "reactions": {"url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2123/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2123/timeline", "performed_via_github_app": null, "state_reason": null}