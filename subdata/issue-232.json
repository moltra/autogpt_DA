{"url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2908", "repository_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT", "labels_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2908/labels{/name}", "comments_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2908/comments", "events_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2908/events", "html_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/2908", "id": 1679479362, "node_id": "PR_kwDOJKSTjM5O6ZLo", "number": 2908, "title": "feat: add event dispatcher", "user": {"login": "tanns2", "id": 11090098, "node_id": "MDQ6VXNlcjExMDkwMDk4", "avatar_url": "https://avatars.githubusercontent.com/u/11090098?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanns2", "html_url": "https://github.com/tanns2", "followers_url": "https://api.github.com/users/tanns2/followers", "following_url": "https://api.github.com/users/tanns2/following{/other_user}", "gists_url": "https://api.github.com/users/tanns2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanns2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanns2/subscriptions", "organizations_url": "https://api.github.com/users/tanns2/orgs", "repos_url": "https://api.github.com/users/tanns2/repos", "events_url": "https://api.github.com/users/tanns2/events{/privacy}", "received_events_url": "https://api.github.com/users/tanns2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 5272676243, "node_id": "LA_kwDOJKSTjM8AAAABOkankw", "url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/labels/enhancement", "name": "enhancement", "color": "a2eeef", "default": true, "description": "New feature or request"}, {"id": 5400185961, "node_id": "LA_kwDOJKSTjM8AAAABQeBMaQ", "url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/labels/conflicts", "name": "conflicts", "color": "FBCA04", "default": false, "description": "Automatically applied to PRs with merge conflicts"}, {"id": 5410633608, "node_id": "LA_kwDOJKSTjM8AAAABQn-3iA", "url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/labels/size/l", "name": "size/l", "color": "709B6D", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2023-04-22T11:00:07Z", "updated_at": "2023-05-01T12:09:37Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "draft": false, "pull_request": {"url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/pulls/2908", "html_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/2908", "diff_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/2908.diff", "patch_url": "https://github.com/Significant-Gravitas/Auto-GPT/pull/2908.patch", "merged_at": null}, "body": "### Background\r\nThe output of AutoGPT is logged to the console and prompt. There is no possibility to directly interact with the output. The aim of the event dispatcher is to provide the possibility for sending the events to a defined endpoint. The endpoint can be any microservice or 3rd party application (which then can do further transformations, e.g. enterprise bus). The event dispatcher fires and forgets all data that is put to the console. It can be seen as the enabler for further integration in a more complex application landscape. \r\nNote: As this is a data forwarding, a plugin does not make sense as it does not have any effect on the running instance of AutoGPT.\r\n\r\n### Changes\r\nThe change include a configuration and the event dispatcher itself. The configuration contains all information for the endpoint (protocol, port, host, endpoint) while the event dispatcher just sends the event to the defined endpoint over HTTP POST. The feature is attached to the logs.py typewriter_log method. It forwards the data if the event dispatcher is enabled. The event dispatcher catches every exception that can occur when trying to send the request. It sends the data asynchronosly over a new thread. In case of error and if it is not muted, the error is printed to the console. It never blocks the execution and flow of AutoGPT.\r\n\r\n### Documentation\r\nThe readme.md contains the configuration documentation. Inside the environments, there is a sample config as well. Further, the code is clean and also documented.\r\n\r\n### Test Plan\r\nTested with following scenarios:\r\n\r\n- nothing set up -> nothing is received at endpoint (simple separated HTTP server script)\r\n- set up, not enabled -> nothing is received at endpoint (simple separated HTTP server script)\r\n- set up, enabled, muted -> HTTP script receives events\r\n- set up, no HTTP server running, muted-> AutoGPT works normally, no error output\r\n- set up, no HTTP server running, not muted -> error output in the console\r\n- set up, enabled, wrong configuration, muted -> AutoGPT works normally, no error output\r\n- set up, enabled, wrong configuration, not muted -> error output in the console\r\n\r\n### PR Quality Checklist\r\n- [x] My pull request is atomic and focuses on a single change.\r\n- [x] I have thoroughly tested my changes with multiple different prompts.\r\n- [x] I have considered potential risks and mitigations for my changes.\r\n- [x] I have documented my changes clearly and comprehensively.\r\n- [x] I have not snuck in any \"extra\" small tweaks changes\r\n\r\n\r\n", "reactions": {"url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2908/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/Significant-Gravitas/Auto-GPT/issues/2908/timeline", "performed_via_github_app": null, "state_reason": null}